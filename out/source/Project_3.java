/* autogenerated by Processing revision 1276 on 2021-11-12 */
import processing.core.*;
import processing.data.*;
import processing.event.*;
import processing.opengl.*;

import java.util.HashMap;
import java.util.ArrayList;
import java.io.File;
import java.io.BufferedReader;
import java.io.PrintWriter;
import java.io.InputStream;
import java.io.OutputStream;
import java.io.IOException;

public class Project_3 extends PApplet {

PImage img;
boolean buttonRain = false;
boolean buttonLight = false;
int mX,mY,mPX,mPY;

 public void setup() {
    /* size commented out by preprocessor */;
    startPage();
}

 public void draw() {
    img = loadImage("forest.jpg");
    img.resize(370,410);
    img.loadPixels();
    if (buttonRain) {
        painting();
    }
    if (buttonLight){
        light();
    }
    img.updatePixels();
}

 public void startPage() {
    background(203,213,220);
    PImage imgList;
    
    fill(227,197,180);
    stroke(190,146,96);
    strokeWeight(3);
    rect(440,60,160,60,28);//button 1 
    rect(440,160,160,60,28);//button 2 
    rect(440,260,160,60,28);//button 3
    rect(440,360,160,60,28);//button 4
    strokeWeight(2);
    line(520, 260, 520, 320);//button 3 L&R
    line(520, 360, 520, 420);//button 4 L&R

    PFont font;
    font = loadFont("BernardMT-Condensed-48.vlw");
    fill(135,115,105);
    textFont(font,23);
    text("Distress", 485, 98);
    text("Complementary", 455, 198);
    text("Paint", 460, 298);
    text("Rain", 540, 298);
    text("Movie", 460, 398);
    text("Light", 540, 398);
    textSize(15);
    text("Box Select to Zoom In",150,28);
    
    stroke(195,168,119);
    noFill();
    rect(30,30,380,420,10);//imgLocation
}

 public void piexlload() {
    startPage();
    loadPixels();
    for (int x = 0;x < img.width;x++) {
        for (int y = 0;y < img.height;y++) {
            int loc = x + 35 + (y + 35) * width;
            pixels[loc] = color(img.get(PApplet.parseInt(x),PApplet.parseInt(y)));
        }
    }
    updatePixels();
}


 public void zoomIn() {
    PImage bigger = createImage(mPX - mX, mPY - mY,RGB);
    bigger.loadPixels();
    strokeWeight(1);
    noFill();
    rect(mX,mY,mPX - mX,mPY - mY);
    for (int x = 0; x < mPX - mX; x++) {
        for (int y = 0; y < mPY - mY; y++) {
            bigger.pixels[x + y * (mPX - mX)] = pixels[x + mX + (y + mY) * width];
        }
    }
    bigger.updatePixels();
    image(bigger,40,40,(mPX - mX) * 2,(mPY - mY) * 2);
}

 public void distress() {
    image(img, 35, 35);
    for (int i = 0;i < (img.width * img.height / 7); i ++) {
        int loc = PApplet.parseInt(random(img.width * img.height));
        img.pixels[loc] = color(100);
    }
    img.updatePixels();
}

 public void complementary() {
    image(img, 35, 35);
    img.loadPixels();
    for (int i = 0;i < img.width * img.height;i++) {
        img.pixels[i] = 255 - img.pixels[i];
    }
    img.updatePixels();
}

 public void painting() {
    for (int i = 0;i < 90000;i++) {
        float x = random(0,360);
        float y = random(0,400);
        int c = img.get(PApplet.parseInt(x),PApplet.parseInt(y));
        fill(c);
        noStroke();
        ellipse(x + 40, y + 40, 6, 6);
    }
}

 public void movie() {
    loadPixels();
    for (int x = 0; x < img.width; x++) {
        for (int y = 0; y < img.height; y++) {
            int loc = x + y * img.width;
            float r;
            r = red(img.pixels[loc]);
            float maxdist = 100;
            float d = dist(x, y, 202, 222);
            float adjustbrightness = 100 * (maxdist - d) / maxdist;
            r += adjustbrightness;
            r = constrain(r, 0, 200);
            int c = color(r);
            pixels[x + 35 + (y + 35) * width] = c;
        }
    }
    updatePixels();
}

 public void light() {
    loadPixels();
    for (int x = 0; x < img.width; x++) {
        for (int y = 0; y < img.height; y++) {
            int loc = x + y * img.width;
            float r,g,b;
            r = red(img.pixels[loc]);
            b = blue(img.pixels[loc]);
            g = green(img.pixels[loc]);
            float maxdist = 60;
            float d = dist(x, y, mouseX, mouseY);
            float brightness = 240 * (maxdist - d) / maxdist;
            pixels[x + 35 + (y + 35) * width] = color(r+brightness,g+brightness,b+brightness);
        }
    }
    updatePixels();
}
 public void mousePressed() {
    mX = mouseX;
    mY = mouseY;
}
 public void mouseReleased() {
    if (mouseX > 440 &&  mouseX < 600 &&  mouseY > 60 &&  mouseY < 120) {
        startPage();
        buttonRain = false;
        buttonLight = false;
        distress();
    }
    if (mouseX > 440 &&  mouseX < 600 &&  mouseY > 160 &&  mouseY < 220) {
        startPage();
        buttonRain = false;
        buttonLight = false;
        complementary();
    }
    if (mouseX > 440 &&  mouseX < 520 &&  mouseY > 260 &&  mouseY < 320) {
        startPage();
        buttonRain = false;
        buttonLight = false;
        painting();
    }
    if (mouseX > 520 &&  mouseX < 600 &&  mouseY > 260 &&  mouseY < 320) {
        buttonLight = false;
        startPage();
        buttonRain = true;
    }
    if (mouseX > 40 &&  mouseX < 400 &&  mouseY > 40 &&  mouseY < 440) {
        buttonRain = false;
        buttonLight = false;
        piexlload();
        mPX = mouseX;
        mPY = mouseY;
        zoomIn();
    }
    if (mouseX > 440 &&  mouseX < 520 &&  mouseY > 360 &&  mouseY < 420) {
        startPage();
        buttonRain = false;
        buttonLight = false;
        movie();
    }
    if (mouseX > 520 &&  mouseX < 600 &&  mouseY > 360 &&  mouseY < 420) {
        startPage();
        buttonRain = false;
        buttonLight = true;
        light();
    }
}


  public void settings() { size(640, 480, P2D); }

  static public void main(String[] passedArgs) {
    String[] appletArgs = new String[] { "Project_3" };
    if (passedArgs != null) {
      PApplet.main(concat(appletArgs, passedArgs));
    } else {
      PApplet.main(appletArgs);
    }
  }
}
